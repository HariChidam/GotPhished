"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/scan";
exports.ids = ["pages/api/scan"];
exports.modules = {

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("openai");

/***/ }),

/***/ "(api)/./pages/api/scan.ts":
/*!***************************!*\
  !*** ./pages/api/scan.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_0__);\n\nconst configuration = new openai__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n    apiKey: process.env.OPENAI_API_KEY || \"\"\n});\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(configuration);\n/* harmony default export */ async function __WEBPACK_DEFAULT_EXPORT__(req, res) {\n    if (!configuration.apiKey) {\n        res.status(500).json({\n            error: {\n                message: \"OpenAI API key not configured, please follow instructions in README.md\"\n            }\n        });\n        return;\n    }\n    const { emailAddress, subject, body } = req.body;\n    if (!emailAddress || !subject || !body) {\n        res.status(400).json({\n            error: {\n                message: \"Please provide email address, subject, and body\"\n            }\n        });\n        return;\n    }\n    try {\n        const completion = await openai.createCompletion({\n            model: \"text-davinci-003\",\n            prompt: createPrompt(emailAddress, subject, body),\n            temperature: 0.6,\n            max_tokens: 100\n        });\n        res.status(200).json({\n            result: completion.data.choices[0].text\n        });\n    } catch (error) {\n        console.error(\"Error:\", error);\n        res.status(500).json({\n            error: {\n                message: \"An error occurred\"\n            }\n        });\n    }\n}\nfunction createPrompt(emailAddress, subject, body) {\n    return `\n  I have received an email and I need your assistance in evaluating if it is a phishing or scam email. Please carefully review the following details:\n\n  Email address: ${emailAddress}\n  Subject: ${subject}\n  Body: ${body}\n\n  Criteria for identifying phishing or scam emails:\n  1. Check for any suspicious or unusual content in the email.\n  2. Look for any requests for personal information, such as passwords or credit card details.\n  3. Analyze the email for any suspicious attachments or links.\n  4. Pay attention to the sender's email address and verify its authenticity.\n  5. Assess the overall tone and language used in the email for any signs of urgency, coercion, or inconsistencies.\n  6. Look for any grammatical or spelling errors in the email.\n\n  Please provide an analysis of the email, highlighting any red flags or indications of phishing or scam activity. Your expertise is greatly appreciated. In your response make sure\n  the first thing you say is the percentage chance that this is an phishing or scam email. Just have it be a number between 0 and 100 and then a period. After that continue to the explanation.\n\n  Thank you!\n  `;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2Nhbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDa0Q7QUFFbEQsTUFBTUUsZ0JBQWdCLElBQUlGLGlEQUFhQSxDQUFDO0lBQ3RDRyxRQUFRQyxRQUFRQyxJQUFJQyxrQkFBa0I7QUFDeEM7QUFDQSxNQUFNQyxTQUFTLElBQUlOLDZDQUFTQSxDQUFDQztBQUU3Qiw2QkFBZSwwQ0FBZ0JNLEdBQW1CLEVBQUVDLEdBQW9CO0lBQ3RFLElBQUksQ0FBQ1AsY0FBY0MsUUFBUTtRQUN6Qk0sSUFBSUMsT0FBTyxLQUFLQyxLQUFLO1lBQ25CQyxPQUFPO2dCQUNMQyxTQUFTO1lBQ1g7UUFDRjtRQUNBO0lBQ0Y7SUFFQSxNQUFNLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUUsR0FBR1IsSUFBSVE7SUFFNUMsSUFBSSxDQUFDRixnQkFBZ0IsQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNO1FBQ3RDUCxJQUFJQyxPQUFPLEtBQUtDLEtBQUs7WUFDbkJDLE9BQU87Z0JBQ0xDLFNBQVM7WUFDWDtRQUNGO1FBQ0E7SUFDRjtJQUVBLElBQUk7UUFDRixNQUFNSSxhQUFhLE1BQU1WLE9BQU9XLGlCQUFpQjtZQUMvQ0MsT0FBTztZQUNQQyxRQUFRQyxhQUFhUCxjQUFjQyxTQUFTQztZQUM1Q00sYUFBYTtZQUNiQyxZQUFZO1FBQ2Q7UUFFQWQsSUFBSUMsT0FBTyxLQUFLQyxLQUFLO1lBQUVhLFFBQVFQLFdBQVdRLEtBQUtDLE9BQU8sQ0FBQyxFQUFFLENBQUNDO1FBQUs7SUFDakUsRUFBRSxPQUFPZixPQUFPO1FBQ2RnQixRQUFRaEIsTUFBTSxVQUFVQTtRQUN4QkgsSUFBSUMsT0FBTyxLQUFLQyxLQUFLO1lBQUVDLE9BQU87Z0JBQUVDLFNBQVM7WUFBb0I7UUFBRTtJQUNqRTtBQUNGO0FBRUEsU0FBU1EsYUFBYVAsWUFBb0IsRUFBRUMsT0FBZSxFQUFFQyxJQUFZO0lBQ3ZFLE9BQU8sQ0FBQzs7O2lCQUdPLEVBQUVGLGFBQWE7V0FDckIsRUFBRUMsUUFBUTtRQUNiLEVBQUVDLEtBQUs7Ozs7Ozs7Ozs7Ozs7O0VBY2IsQ0FBQztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhpc2gvLi9wYWdlcy9hcGkvc2Nhbi50cz81YmQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24sIE9wZW5BSUFwaSB9IGZyb20gJ29wZW5haSc7XG5cbmNvbnN0IGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfHwgJycsXG59KTtcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUlBcGkoY29uZmlndXJhdGlvbik7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAoIWNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbWVzc2FnZTogJ09wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkLCBwbGVhc2UgZm9sbG93IGluc3RydWN0aW9ucyBpbiBSRUFETUUubWQnLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB7IGVtYWlsQWRkcmVzcywgc3ViamVjdCwgYm9keSB9ID0gcmVxLmJvZHk7XG5cbiAgaWYgKCFlbWFpbEFkZHJlc3MgfHwgIXN1YmplY3QgfHwgIWJvZHkpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHByb3ZpZGUgZW1haWwgYWRkcmVzcywgc3ViamVjdCwgYW5kIGJvZHknLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY3JlYXRlQ29tcGxldGlvbih7XG4gICAgICBtb2RlbDogJ3RleHQtZGF2aW5jaS0wMDMnLFxuICAgICAgcHJvbXB0OiBjcmVhdGVQcm9tcHQoZW1haWxBZGRyZXNzLCBzdWJqZWN0LCBib2R5KSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjYsXG4gICAgICBtYXhfdG9rZW5zOiAxMDAsXG4gICAgfSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdDogY29tcGxldGlvbi5kYXRhLmNob2ljZXNbMF0udGV4dCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogeyBtZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJyZWQnIH0gfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvbXB0KGVtYWlsQWRkcmVzczogc3RyaW5nLCBzdWJqZWN0OiBzdHJpbmcsIGJvZHk6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gIEkgaGF2ZSByZWNlaXZlZCBhbiBlbWFpbCBhbmQgSSBuZWVkIHlvdXIgYXNzaXN0YW5jZSBpbiBldmFsdWF0aW5nIGlmIGl0IGlzIGEgcGhpc2hpbmcgb3Igc2NhbSBlbWFpbC4gUGxlYXNlIGNhcmVmdWxseSByZXZpZXcgdGhlIGZvbGxvd2luZyBkZXRhaWxzOlxuXG4gIEVtYWlsIGFkZHJlc3M6ICR7ZW1haWxBZGRyZXNzfVxuICBTdWJqZWN0OiAke3N1YmplY3R9XG4gIEJvZHk6ICR7Ym9keX1cblxuICBDcml0ZXJpYSBmb3IgaWRlbnRpZnlpbmcgcGhpc2hpbmcgb3Igc2NhbSBlbWFpbHM6XG4gIDEuIENoZWNrIGZvciBhbnkgc3VzcGljaW91cyBvciB1bnVzdWFsIGNvbnRlbnQgaW4gdGhlIGVtYWlsLlxuICAyLiBMb29rIGZvciBhbnkgcmVxdWVzdHMgZm9yIHBlcnNvbmFsIGluZm9ybWF0aW9uLCBzdWNoIGFzIHBhc3N3b3JkcyBvciBjcmVkaXQgY2FyZCBkZXRhaWxzLlxuICAzLiBBbmFseXplIHRoZSBlbWFpbCBmb3IgYW55IHN1c3BpY2lvdXMgYXR0YWNobWVudHMgb3IgbGlua3MuXG4gIDQuIFBheSBhdHRlbnRpb24gdG8gdGhlIHNlbmRlcidzIGVtYWlsIGFkZHJlc3MgYW5kIHZlcmlmeSBpdHMgYXV0aGVudGljaXR5LlxuICA1LiBBc3Nlc3MgdGhlIG92ZXJhbGwgdG9uZSBhbmQgbGFuZ3VhZ2UgdXNlZCBpbiB0aGUgZW1haWwgZm9yIGFueSBzaWducyBvZiB1cmdlbmN5LCBjb2VyY2lvbiwgb3IgaW5jb25zaXN0ZW5jaWVzLlxuICA2LiBMb29rIGZvciBhbnkgZ3JhbW1hdGljYWwgb3Igc3BlbGxpbmcgZXJyb3JzIGluIHRoZSBlbWFpbC5cblxuICBQbGVhc2UgcHJvdmlkZSBhbiBhbmFseXNpcyBvZiB0aGUgZW1haWwsIGhpZ2hsaWdodGluZyBhbnkgcmVkIGZsYWdzIG9yIGluZGljYXRpb25zIG9mIHBoaXNoaW5nIG9yIHNjYW0gYWN0aXZpdHkuIFlvdXIgZXhwZXJ0aXNlIGlzIGdyZWF0bHkgYXBwcmVjaWF0ZWQuIEluIHlvdXIgcmVzcG9uc2UgbWFrZSBzdXJlXG4gIHRoZSBmaXJzdCB0aGluZyB5b3Ugc2F5IGlzIHRoZSBwZXJjZW50YWdlIGNoYW5jZSB0aGF0IHRoaXMgaXMgYW4gcGhpc2hpbmcgb3Igc2NhbSBlbWFpbC4gSnVzdCBoYXZlIGl0IGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwIGFuZCB0aGVuIGEgcGVyaW9kLiBBZnRlciB0aGF0IGNvbnRpbnVlIHRvIHRoZSBleHBsYW5hdGlvbi5cblxuICBUaGFuayB5b3UhXG4gIGA7XG59XG4iXSwibmFtZXMiOlsiQ29uZmlndXJhdGlvbiIsIk9wZW5BSUFwaSIsImNvbmZpZ3VyYXRpb24iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJvcGVuYWkiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiZW1haWxBZGRyZXNzIiwic3ViamVjdCIsImJvZHkiLCJjb21wbGV0aW9uIiwiY3JlYXRlQ29tcGxldGlvbiIsIm1vZGVsIiwicHJvbXB0IiwiY3JlYXRlUHJvbXB0IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwicmVzdWx0IiwiZGF0YSIsImNob2ljZXMiLCJ0ZXh0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/scan.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/scan.ts"));
module.exports = __webpack_exports__;

})();